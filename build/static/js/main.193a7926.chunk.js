(this.webpackJsonplibdrive=this.webpackJsonplibdrive||[]).push([[0],{154:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var r=a(25),n=a(0),o=a.n(n),s=a(17),c=a.n(s),i=a(15),l=a(20),u=a(205),h=a(214),d=a(8),m=a(9),p=a(12),j=a(13),b=a(1),g=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("_VERSION")||localStorage.setItem("_VERSION",Me.a),localStorage.getItem("_VERSION")!==Me.a&&("caches"in window&&(caches.keys().then((function(e){e.forEach((function(e){caches.delete(e)}))})),window.location.reload(!0)),localStorage.setItem("_VERSION",Me.a))}},{key:"render",value:function(){var e=this.state,t=e.auth,a=e.server;return t&&a?Object(b.jsx)(l.a,{to:"/browse"},E()):Object(b.jsx)(l.a,{to:"/login"},E())}}]),a}(n.Component),f=a(29),v=a.n(f),x=a(7),O=(a(42),a(18)),y=a.n(O),S=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),isLoaded:!1,metadata:{},server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,r=t.server;a&&r||this.props.history.push("/logout");var n="".concat(r,"/api/v1/metadata?a=").concat(a,"&r=0:16&s=popularity-des");y.a.get(n).then((function(t){return e.setState({isLoaded:!0,metadata:t.data.content})})).catch((function(t){if(console.error(t),t.response){var a=t.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Login"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):r?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout")}else t.request&&(r?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(r,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout"))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata;return t?Object(b.jsxs)("div",{className:"Browse",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(w,{metadata:a}),Object(b.jsx)(B,{})]}):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component),C=a(199),w=(a(154),function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={metadata:r.props.metadata,server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.metadata,a=e.server;return Object(b.jsx)("div",{className:"Carousel",children:t.length?t.map((function(e){return Object(b.jsxs)("div",{className:"carousel__category",children:[Object(b.jsx)(i.b,{to:"/browse/".concat(e.categoryInfo.name),className:"carousel__category__title no_decoration_link",children:e.categoryInfo.name},E()),Object(b.jsx)("div",{className:"carousel__items",children:e.children.length?e.children.map((function(e){return Object(b.jsxs)("figure",{className:"carousel__item__figure",children:[Object(b.jsx)(i.b,{to:"/view/".concat(e.id),children:Object(b.jsx)("img",{src:e.posterPath||"".concat(a,"/api/v1/image/poster?text=").concat(e.title,"&extention=jpeg"),className:"carousel__item__poster",alt:e.title},E())},E()),Object(b.jsx)(C.a,{className:"carousel__item__title",children:e.title},E())]},E())})):null})]},E())})):null})}}]),a}(n.Component)),_=a(39),k=a.n(_),N=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),category:r.props.match.params.category,isLoaded:!1,metadata:{},page:parseInt(k.a.parse(r.props.location.search).page)||1,range:"".concat(void 0===k.a.parse(r.props.location.search).page?"0:16":"".concat(16*(parseInt(k.a.parse(r.props.location.search).page)-1),":").concat(16*parseInt(k.a.parse(r.props.location.search).page))),server:sessionStorage.getItem("server")||localStorage.getItem("server"),sort:k.a.parse(r.props.location.search).sort||"alphabet-asc"},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,r=t.category,n=t.range,o=t.server,s=t.sort;a&&o||this.props.history.push("/logout");var c="".concat(o,"/api/v1/metadata?a=").concat(a,"&c=").concat(r,"&r=").concat(n,"&s=").concat(s);y.a.get(c).then((function(t){return e.setState({isLoaded:!0,metadata:t.data.content,pages:Math.ceil(t.data.content[0].length/16)})})).catch((function(t){if(console.error(t),t.response){var a=t.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Login"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):o?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout")}else t.request&&(o?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(o,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout"))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata,r=e.page,n=e.pages,o=e.sort;return t?Object(b.jsxs)("div",{className:"CategoryBrowse",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(D,{metadata:a}),Object(b.jsx)(ge,{props:{page:r,pages:n,sort:o,thisprops:this.props}}),Object(b.jsx)(Te,{props:{thisprops:this.props}}),Object(b.jsx)(B,{})]}):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component);var I=a(203),T=(a(156),Object(I.a)((function(e){return{footer__container:{backgroundColor:e.palette.background.paper,width:"100%",height:"75px",display:"flex",alignItems:"center",justifyContent:"center"}}})));function B(){var e=T();return Object(b.jsxs)("footer",{className:e.footer__container,id:"footer__container",children:[Object(b.jsx)("a",{href:"https://github.com/libDrive/libDrive",target:"_blank",children:Object(b.jsx)("img",{src:"/images/github.png",className:"footer__github",height:"48px",alt:"github-logo"})}),Object(b.jsx)("a",{className:"no_decoration_link footer__text",href:"https://eliasbenb.github.io",target:"_blank",children:"\xa9 2021 Copyright: Elias Benbourenane - v".concat(Me.a)})]})}function E(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}a(157);var D=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={metadata:r.props.metadata,server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.metadata,a=e.server;return Object(b.jsx)("div",{className:"Tile",children:t.length?t.map((function(e){return Object(b.jsxs)("div",{className:"tile__category",children:[Object(b.jsx)(i.b,{to:"/browse/".concat(e.categoryInfo.name),className:"tile__category__title no_decoration_link",children:e.categoryInfo.name},E()),Object(b.jsx)("div",{className:"tile__items",children:e.children.length?e.children.map((function(e){return Object(b.jsxs)("figure",{className:"tile__item__figure",children:[Object(b.jsx)(i.b,{to:"/view/".concat(e.id),children:Object(b.jsx)("img",{src:e.posterPath||"".concat(a,"/api/v1/image/poster?text=").concat(e.title,"&extention=jpeg"),className:"tile__item__poster",alt:e.title},E())},E()),Object(b.jsx)(C.a,{className:"tile__item__title",children:e.title},E())]},E())})):null})]},E())})):null})}}]),a}(n.Component),L=a(10),R=a(204),q=a(217),P=a(218),M=a(209),A=a(5),W=a(61),V=a.n(W),z=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:"",error:"",page:!1,password:"",server:"",signup:!1,tempServer:window.location.origin.startsWith("app://-")?"":window.location.origin,username:""},r.handleTempServerChange=r.handleTempServerChange.bind(Object(L.a)(r)),r.handlePassChange=r.handlePassChange.bind(Object(L.a)(r)),r.handleUserChange=r.handleUserChange.bind(Object(L.a)(r)),r.handleServerSubmit=r.handleServerSubmit.bind(Object(L.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(L.a)(r)),r.handleSignup=r.handleSignup.bind(Object(L.a)(r)),r.dismissError=r.dismissError.bind(Object(L.a)(r)),r}return Object(m.a)(a,[{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleServerSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.tempServer;if(!a)return this.setState({error:"Server is required"});a.startsWith("http")||(a="https://".concat(a)),y.a.get("".concat(a,"/api/v1/auth?rules=signup")).then((function(e){var r=e.data;200===r.code?(localStorage.setItem("auth","0"),localStorage.setItem("server",a),sessionStorage.setItem("auth","0"),sessionStorage.setItem("server",a),t.props.history.push(r.content)):!0===r.content?t.setState({signup:!0,page:!0}):!1===r.content&&t.setState({signup:!1,page:!0})})).catch((function(e){console.error(e);try{var t=response.data;x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"OK"})}catch(r){x.a.fire({title:"Error!",text:"You were unable to communicate with the server. Are you sure ".concat(a," is the correct server?"),icon:"error",confirmButtonText:"OK"})}}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,r=a.password,n=a.tempServer,o=a.username;return n?(n.startsWith("http")||(n="https://".concat(n)),y.a.get("".concat(n,"/api/v1/auth?u=").concat(o,"&p=").concat(r)).then((function(e){var a=e.data;localStorage.setItem("server",n),sessionStorage.setItem("server",n),localStorage.setItem("auth",a.content.auth),sessionStorage.setItem("auth",a.content.auth),t.props.history.push("/")})).catch((function(e){console.error(e);try{var t=response.data;x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"OK"})}catch(a){x.a.fire({title:"Error!",text:"Something went wrong while communicating with the server ".concat(n),icon:"error",confirmButtonText:"OK"})}})),this.setState({error:""})):this.setState({error:"Server is required"})}},{key:"handleSignup",value:function(){var e=this,t=this.state,a=t.password,r=t.tempServer,n=t.username;return n?a?(y.a.get("".concat(r,"/api/v1/signup?u=").concat(n,"&p=").concat(a)).then((function(t){var a=t.data;localStorage.setItem("server",r),sessionStorage.setItem("server",r),localStorage.setItem("auth",a.content.auth),sessionStorage.setItem("auth",a.content.auth),e.props.history.push("/")})).catch((function(e){console.log(e);var t=response.data;try{x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"OK"})}catch(a){x.a.fire({title:"Error!",text:"Something went wrong while communicating with the server ".concat(r),icon:"error",confirmButtonText:"OK"})}})),this.setState({error:""})):this.setState({error:"Password is required"}):this.setState({error:"Username is required"})}},{key:"handleTempServerChange",value:function(e){this.setState({tempServer:e.target.value})}},{key:"handleUserChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.password,r=e.page,n=e.tempServer,o=e.username,s=this.props.classes;return r?Object(b.jsxs)(R.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(u.a,{}),Object(b.jsxs)("div",{className:s.paper,children:[Object(b.jsx)(q.a,{className:s.avatar,children:Object(b.jsx)(V.a,{})}),Object(b.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(b.jsxs)("form",{className:s.form,onSubmit:this.handleSubmit,noValidate:!0,children:[t&&Object(b.jsx)("div",{style:{},children:Object(b.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(b.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),t]})}),Object(b.jsx)(P.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"server",label:"Server",name:"server",autoComplete:"server",onChange:this.handleTempServerChange,value:n,autoFocus:!0,disabled:!0}),Object(b.jsx)(P.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:this.handleUserChange,value:o}),Object(b.jsx)(P.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handlePassChange,value:a}),Object(b.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Sign In"}),this.state.signup?Object(b.jsxs)("div",{className:"Signup",style:{textAlign:"center"},children:[Object(b.jsx)(M.a,{type:"button",onClick:this.handleSignup,fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Sign Up"}),Object(b.jsx)(C.a,{variant:"body1",children:"Be aware that the owner of this server can view your credentials!"})]}):Object(b.jsx)("div",{className:"Signup"})]})]})]}):Object(b.jsxs)(R.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(u.a,{}),Object(b.jsxs)("div",{className:s.paper,children:[Object(b.jsx)(q.a,{className:s.avatar,children:Object(b.jsx)(V.a,{})}),Object(b.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(b.jsxs)("form",{className:s.form,onSubmit:this.handleServerSubmit,noValidate:!0,children:[t&&Object(b.jsx)("div",{style:{},children:Object(b.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(b.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),t]})}),Object(b.jsx)(P.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"server",label:"Server",name:"server",autoComplete:"server",onChange:this.handleTempServerChange,value:n,autoFocus:!0}),Object(b.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Next"})]})]})]})}}]),a}(n.Component),U=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(z),F=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={isLoaded:!1},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;localStorage.clear(),sessionStorage.clear(),setTimeout((function(){return e.setState({isLoaded:!0})}),500)}},{key:"render",value:function(){return this.state.isLoaded?Object(b.jsx)(l.a,{to:"/login"},E()):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component),K=a(40),J=a(55),X=a(210),Y=a(211),Q=a(114),G=a(109),H=a(221),$=a(212),Z=a(24),ee=a(103),te=a.n(ee),ae=a(104),re=a.n(ae),ne=a(213),oe=a(81),se=a.n(oe),ce=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={accounts:{},auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),categories:{},isLoaded:!1,server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,r=t.server,n="".concat(r,"/api/v1/environment?a=").concat(a);y.a.get(n).then((function(t){var a=t.data;e.setState({accounts:a.content.account_list,categories:a.content.category_list,isLoaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.accounts,a=e.categories;return e.isLoaded?Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(le,{props:{categories:a,accounts:t}})}):Object(b.jsx)("div",{className:"Nav",children:Object(b.jsx)(le,{props:{categories:[],accounts:[]}})})}}]),a}(n.Component),ie=Object(I.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary},grow:{flexGrow:1},title:Object(J.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(J.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Z.b)(e.palette.common.main,.15),"&:hover":{backgroundColor:Object(Z.b)(e.palette.common.main,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(J.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),browse:{marginRight:"15px"}}}));function le(e){var t=ie(),a=Object(l.g)(),r=Object(n.useState)(""),o=Object(K.a)(r,2),s=o[0],c=o[1];return Object(b.jsx)("div",{className:t.grow,children:Object(b.jsx)(X.a,{position:"static",className:t.root,children:Object(b.jsxs)(Y.a,{children:[Object(b.jsx)(i.b,{to:"/",className:"no_decoration_link",children:Object(b.jsx)(C.a,{className:t.title,variant:"h6",noWrap:!0,children:"libDrive"})}),Object(b.jsxs)("form",{className:t.search,onSubmit:function(e){e.preventDefault(),a.push({pathname:"/search/".concat(s),key:E()})},children:[Object(b.jsx)("div",{className:t.searchIcon,children:Object(b.jsx)(se.a,{})}),Object(b.jsx)(Q.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){c(e.target.value)}})]}),Object(b.jsx)("div",{className:t.grow}),Object(b.jsx)(ue,{props:e.props.categories}),Object(b.jsx)(de,{}),Object(b.jsx)(he,{props:e.props.accounts})]})})})}function ue(e){var t=o.a.useState(null),a=Object(K.a)(t,2),r=a[0],n=a[1],s=ie(),c=function(){n(null)};return Object(b.jsxs)("div",{className:s.browse,children:[Object(b.jsx)(M.a,{"aria-controls":"browse-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},children:"Browse"}),Object(b.jsxs)(G.a,{id:"browse-menu",anchorEl:r,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(r),onClose:c,children:[Object(b.jsx)(i.b,{to:"/",className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:c,children:"Home Page"})}),Object(b.jsx)($.a,{light:!0}),e.props.length?e.props.map((function(e){return Object(b.jsx)(i.b,{to:"/browse/".concat(e.name),className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:c,children:e.name})},E())})):null]})]})}function he(e){var t=this,a=o.a.useState(null),r=Object(K.a)(a,2),n=r[0],s=r[1],c=function(){s(null)},l=Object(b.jsx)(te.a,{});return e.props.pic&&(e.props.pic.includes("http")||e.props.pic.includes("www"))&&(l=Object(b.jsx)("img",{src:e.props.pic,width:"32px",alt:"profile-pic"})),Object(b.jsxs)("div",{children:[Object(b.jsx)(ne.a,{"aria-label":"more","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:l}),Object(b.jsxs)(G.a,{id:"account-menu",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:Boolean(n),onClose:c,children:[Object(b.jsx)(i.b,{to:"/settings",className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:c,children:"Settings"})}),Object(b.jsx)(H.a,{onClick:function(){var e=sessionStorage.getItem("auth")||localStorage.getItem("auth"),a=sessionStorage.getItem("server")||localStorage.getItem("server"),r="".concat(a,"/api/v1/rebuild?a=").concat(e);y.a.get(r).then((function(e){return x.a.fire({title:"Success!",text:"libDrive's metadata is being rebuilt...",icon:"success",confirmButtonText:"OK"})})).catch((function(r){console.error(r),null==e||null==a?t.props.history.push("/login"):r.response?401===r.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(e){e.isConfirmed&&t.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the server!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()})):r.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is ".concat(a," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}))},children:"Rebuild"}),Object(b.jsx)(i.b,{to:"/logout",className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:c,children:"Logout"})})]})]})}function de(){var e=o.a.useState(null),t=Object(K.a)(e,2),a=t[0],r=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)(ne.a,{"aria-label":"more","aria-controls":"theme-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},children:Object(b.jsx)(re.a,{})}),Object(b.jsxs)(G.a,{id:"theme-menu",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},keepMounted:!0,open:Boolean(a),onClose:function(){r(null)},children:[Object(b.jsx)(H.a,{onClick:function(){r(null),localStorage.setItem("theme","light"),sessionStorage.setItem("theme","light"),window.location.reload()},children:"Light"}),Object(b.jsx)(H.a,{onClick:function(){r(null),localStorage.setItem("theme","dark"),sessionStorage.setItem("theme","dark"),window.location.reload()},children:"Dark"}),Object(b.jsx)(H.a,{onClick:function(){r(null),localStorage.setItem("theme","dracula"),sessionStorage.setItem("theme","dracula"),window.location.reload()},children:"Dracula"}),Object(b.jsx)(H.a,{onClick:function(){r(null),localStorage.setItem("theme","nord"),sessionStorage.setItem("theme","nord"),window.location.reload()},children:"Nord"})]})]})}a(160);var me=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"NotFound",children:[Object(b.jsx)(ce,{}),Object(b.jsx)("div",{className:"nf",children:Object(b.jsx)("div",{class:"fof",children:Object(b.jsx)("h1",{children:"Error 404"})})})]})}}]),a}(n.Component),pe=a(223),je=a(216),be=Object(I.a)((function(e){return{root:{"& > *":{display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(4)}}}}));function ge(e){var t=e.props,a=t.page,n=t.pages,o=t.sort,s=t.thisprops,c=be();return a>n?Object(b.jsx)(l.a,{to:{pathname:s.location.pathname,search:"?page=".concat(n,"&sort=").concat(o)}},E()):Object(b.jsx)("div",{className:c.root,children:Object(b.jsx)(pe.a,{page:a,count:n,variant:"outlined",color:"primary",renderItem:function(e){return e.page?Object(b.jsx)(i.b,{to:{pathname:s.location.pathname,search:"?page=".concat(e.page,"&sort=").concat(o)},className:"no_decoration_link",children:Object(b.jsx)(je.a,Object(r.a)({},e))},E()):Object(b.jsx)(je.a,Object(r.a)({},e))}})})}var fe=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),isLoaded:!1,metadata:[],query:r.props.match.params.q,server:sessionStorage.getItem("server")||localStorage.getItem("server")},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,r=t.query,n=t.server;a&&n||this.props.history.push("/logout");var o="".concat(n,"/api/v1/metadata?a=").concat(a,"&q=").concat(r);y.a.get(o).then((function(t){return e.setState({isLoaded:!0,metadata:t.data.content})})).catch((function(t){if(console.error(t),t.response){var a=t.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Login"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):n?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout")}else t.request&&(n?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(n,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout"))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata;return t?Object(b.jsxs)("div",{className:"Search",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(w,{metadata:a}),Object(b.jsx)(B,{})]}):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component),ve=a(110),xe=a(105),Oe=a.n(xe),ye=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),error:"",isLoaded:!1,secret:sessionStorage.getItem("secret"),server:sessionStorage.getItem("server")||localStorage.getItem("server")},r.dismissError=r.dismissError.bind(Object(L.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(L.a)(r)),r.handleRestart=r.handleRestart.bind(Object(L.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.secret,r=t.server;null==sessionStorage.getItem("secret")?this.props.history.push("/settings/login"):y.a.get("".concat(r,"/api/v1/config?secret=").concat(a)).then((function(t){return e.setState({config:t.data.content,isLoaded:!0,postConfig:t.data.content,tempSecret:t.data.content.secret_key})})).catch((function(t){if(console.error(t),t.response){var a=t.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Login"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):r?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout")}else t.request&&(r?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(r,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):e.props.history.push("/logout"))}))}},{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleRestart",value:function(e){e.preventDefault();var t=this.state,a=t.secret,r=t.server;y.a.get("".concat(r,"/api/v1/restart?secret=").concat(a)).then((function(e){x.a.fire({title:"Success!",text:e.data.message,icon:"success",confirmButtonText:"OK"})})).catch((function(e){console.error(e),x.a.fire({title:"Success!",text:"libDrive is being restarted, this might take some time, so the app won't load",icon:"success",confirmButtonText:"OK"})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,r=a.secret,n=a.server;y.a.post("".concat(n,"/api/v1/config?secret=").concat(r),this.state.postConfig).then((function(e){x.a.fire({title:"Success!",text:e.data.message,icon:"success",confirmButtonText:"OK"})})).catch((function(e){if(console.error(e),e.response){var a=e.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout"}).then((function(e){e.isConfirmed&&(sessionStorage.removeItem("secret"),t.props.history.push("/settings/login"))})):x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}else e.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is ".concat(n," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}))}},{key:"render",value:function(){var e=this.state,t=e.config,a=e.isLoaded,r=this.props.classes;return a?Object(b.jsxs)("div",{className:"Settings",children:[Object(b.jsx)(ce,{}),Object(b.jsx)("div",{style:{margin:"auto",marginTop:"50px",width:"50%"},children:Object(b.jsx)(ve.a,{id:"config-box",placeholder:t,locale:Oe.a,height:"500px",width:"100%"})}),Object(b.jsx)("form",{className:r.Form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:Object(b.jsxs)("div",{style:{margin:"30px"},children:[Object(b.jsx)(M.a,{style:{marginRight:"20px"},fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,target:"_blank",href:"https://libdrive-config.netlify.app/",children:"Create Config"}),Object(b.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,children:"Submit"}),Object(b.jsx)(M.a,{style:{marginLeft:"20px"},fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,onClick:this.handleRestart,children:"Restart"})]})}),Object(b.jsx)(B,{})]}):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component),Se=Object(A.a)((function(e){return{Form:{textAlign:"center","& .MuiTextField-root":{width:"30ch",margin:e.spacing(1),textAlign:"left"},"& .MuiTypography-root":{margin:"30px 30px"}},submit:{margin:e.spacing(4,0,2),width:"20ch"}}}),{withTheme:!0})(ye),Ce=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),secret:"",server:sessionStorage.getItem("server")||localStorage.getItem("server")},r.handleSecretChange=r.handleSecretChange.bind(Object(L.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(L.a)(r)),r}return Object(m.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,r=a.secret,n=a.server;y.a.get("".concat(n,"/api/v1/config?secret=").concat(r)).then((function(e){sessionStorage.setItem("secret",r),t.props.history.push("/settings")})).catch((function(e){if(console.error(e),e.response){var a=e.response.data;401===a.code?x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"OK"}):x.a.fire({title:"Error!",text:a.message,icon:"error",confirmButtonText:"OK"}).then((function(e){location.reload()}))}else e.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the server. Is ${server} the correct address?",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}))}},{key:"handleSecretChange",value:function(e){this.setState({secret:e.target.value})}},{key:"render",value:function(){var e=this.state.secret,t=this.props.classes;return Object(b.jsxs)("div",{className:"SettingsLoginForm",children:[Object(b.jsx)(ce,{}),Object(b.jsxs)(R.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(u.a,{}),Object(b.jsxs)("div",{className:t.paper,children:[Object(b.jsx)(q.a,{className:t.avatar,children:Object(b.jsx)(V.a,{})}),Object(b.jsx)(C.a,{component:"h1",variant:"h5",children:"Settings Login"}),Object(b.jsxs)("form",{className:t.form,onSubmit:this.handleSubmit,noValidate:!0,children:[Object(b.jsx)(P.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"secret",label:"Secret",name:"secret",type:"password",autoComplete:"secret",onChange:this.handleSecretChange,value:e,required:!0,autoFocus:!0}),Object(b.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"})]})]})]})]})}}]),a}(n.Component),we=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(Ce),_e=a(208),ke=a(220),Ne=a(215),Ie=(a(161),Object(I.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})));function Te(e){var t=Ie(),a=e.props.thisprops;return Object(b.jsx)("div",{className:"SortMenu",children:Object(b.jsx)("div",{className:"sort__container",children:Object(b.jsxs)(_e.a,{variant:"outlined",className:t.formControl,children:[Object(b.jsx)(ke.a,{id:"sort-menu-label",children:"Sort"}),Object(b.jsxs)(Ne.a,{labelId:"sort-menu-label",id:"sort-menu",value:"",label:"Sort",children:[Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=alphabet-asc"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Alphabet Ascending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=alphabet-des"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Alphabet Descending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=date-asc"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Date Ascending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=date-des"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Date Descending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=popularity-asc"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Popularity Ascending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=popularity-des"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Popularity Descending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=vote-asc"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Vote Ascending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=vote-des"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Vote Descending"})},E()),Object(b.jsx)(i.b,{to:{pathname:a.location.pathname,search:"?sort=random"},className:"no_decoration_link",children:Object(b.jsx)(H.a,{children:"Random"})},E())]})]})})})}var Be,Ee=a(108),De=Object(Ee.a)({palette:{type:"light",primary:{main:"#4197fe"},secondary:{main:"#68a0e5"},error:{main:"#d32f2f"},warning:{main:"#ff9800"},success:{main:"#4caf50"},background:{default:"#fafafa",paper:"#e8e8e8"},text:{primary:"#0f0f0f"},common:{main:"#000000"}}}),Le=Object(Ee.a)({palette:{type:"dark",primary:{main:"#4197fe"},secondary:{main:"#68a0e5"},error:{main:"#d32f2f"},warning:{main:"#ff9800"},success:{main:"#4caf50"},background:{default:"#111111",paper:"#1f1f1f"},text:{primary:"#ffffff"},common:{main:"#ffffff"}}}),Re=Object(Ee.a)({palette:{type:"dark",primary:{main:"#6272a4"},secondary:{main:"#44475a"},error:{main:"#ffb86c"},warning:{main:"#ff5555"},success:{main:"#50fa7b"},background:{default:"#282a36",paper:"#242630"},text:{primary:"#f8f8f2"},common:{main:"#6272a4"}}}),qe=Object(Ee.a)({palette:{type:"dark",primary:{main:"#5E81AC"},secondary:{main:"#88C0D0"},error:{main:"#BF616A"},warning:{main:"#EBCB8B"},success:{main:"#A3BE8C"},background:{default:"#2E3440",paper:"#3B4252"},text:{primary:"#ECEFF4"},common:{main:"#81A1C1"}}});"light"===localStorage.getItem("theme")||"light"===sessionStorage.getItem("theme")?Be=De:"dark"===localStorage.getItem("theme")||"dark"===sessionStorage.getItem("theme")?Be=Le:"dracula"===localStorage.getItem("theme")||"dracula"===sessionStorage.getItem("theme")?Be=Re:"nord"===localStorage.getItem("theme")||"nord"===sessionStorage.getItem("theme")?Be=qe:(Be=Le,localStorage.setItem("theme","dark"),sessionStorage.setItem("theme","dark"));var Pe=Be;var Me=a(97),Ae=a(82),We=a.n(Ae),Ve=a(106),ze=a(222),Ue=a(83),Fe=(a(163),function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).fetchData=Object(Ve.a)(We.a.mark((function e(){var t,a,n,o,s,c;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state,a=t.auth,n=t.id,o=t.name,s=t.q,c=t.server,e.next=3,y.a.get("".concat(c,"/api/v1/metadata?a=").concat(a,"&id=").concat(n)).then((function(e){var t=e.data;"application/vnd.google-apps.folder"==t.content.mimeType?(n=t.content.children[s].id,o=t.content.children[s].name):o=t.content.name,r.setState({metadata:t.content})})).catch((function(e){if(console.error(e),e.response){var t=e.response.data;401===t.code?x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Login"}).then((function(e){e.isConfirmed&&r.props.history.push("/logout")})):c?x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?r.props.history.push("/logout"):e.isDismissed&&location.reload()})):r.props.history.push("/logout")}else e.request&&(c?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(c,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?r.props.history.push("/logout"):e.isDismissed&&location.reload()})):r.props.history.push("/logout"))}));case 3:return e.next=5,y.a.get("".concat(c,"/api/v1/stream_map?a=").concat(a,"&id=").concat(n,"&name=").concat(o,"&server=").concat(c)).then((function(e){return r.setState({sources:e.data.content,isLoaded:!0})})).catch((function(e){if(console.error(e),e.response){var t=e.response.data;401===t.code?x.a.fire({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Login"}).then((function(e){e.isConfirmed&&r.props.history.push("/logout")})):c?x.a.fire({title:"Error!",text:"Something went wrong while communicating with the server! Is '".concat(c,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?r.props.history.push("/logout"):e.isDismissed&&location.reload()})):r.props.history.push("/logout")}else e.request&&(c?x.a.fire({title:"Error!",text:"libDrive could not communicate with the server! Is '".concat(c,"' the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?r.props.history.push("/logout"):e.isDismissed&&location.reload()})):r.props.history.push("/logout"))}));case 5:case"end":return e.stop()}}),e)}))),r.state={server:sessionStorage.getItem("server")||localStorage.getItem("server"),auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),q:parseInt(k.a.parse(r.props.location.search).q)||0,id:r.props.match.params.id,isLoaded:!1,metadata:{},sources:[]},r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.auth,a=e.server;t&&a||this.props.history.push("/logout"),document.documentElement.style.setProperty("--plyr-color-main",Pe.palette.primary.main),document.documentElement.style.setProperty("--plyr-video-background",Pe.palette.background.default),document.documentElement.style.setProperty("--plyr-menu-background",Pe.palette.background.paper),document.documentElement.style.setProperty("--plyr-menu-color",Pe.palette.text.primary),this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata;return t&&"file"==a.type?Object(b.jsxs)("div",{className:"View",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(Ke,Object(r.a)({},this)),Object(b.jsx)(B,{})]}):t&&"directory"==a.type&&a.title?Object(b.jsxs)("div",{className:"View",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(Je,Object(r.a)({},this)),Object(b.jsx)(B,{})]}):t&&"directory"==a.type?Object(b.jsxs)("div",{className:"View",children:[Object(b.jsx)(ce,{}),Object(b.jsx)(Xe,Object(r.a)({},this)),Object(b.jsx)(B,{})]}):Object(b.jsx)("div",{className:"Loading",children:Object(b.jsx)(v.a,{color:Pe.palette.primary.main,size:75})})}}]),a}(n.Component)),Ke=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state=e.state,r}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.metadata,r=t.server,n=t.sources;return e=n.length>1?1:0,Object(b.jsxs)("div",{className:"MovieView",children:[Object(b.jsx)("div",{className:"plyr__component",children:Object(b.jsx)(Ue.a,{options:{video:{quality:n,defaultQuality:e,pic:a.backdropPath||"".concat(r,"/api/v1/image/thumbnail?id=").concat(a.id)},preload:"auto",theme:Pe.palette.primary.main,contextmenu:[{text:"libDrive",link:"https://github.com/libDrive/libDrive"}],lang:"en"}})}),Object(b.jsxs)("div",{className:"info__container",children:[Object(b.jsx)("div",{className:"info__left",children:Object(b.jsx)("img",{className:"info__poster",src:a.posterPath||"".concat(r,"/api/v1/image/poster?text=").concat(a.title,"&extention=jpeg")})}),Object(b.jsxs)("div",{className:"info__right",children:[Object(b.jsx)(C.a,{variant:"h2",className:"info__title",children:a.title}),Object(b.jsx)(C.a,{variant:"body1",className:"info__overview",style:{marginTop:"30px"},children:a.overview}),Object(b.jsx)("div",{className:"vote__container",children:Object(b.jsx)(ze.a,{name:"Rating",value:a.voteAverage,max:10,readOnly:!0})}),Object(b.jsx)(Ye,{props:this.state})]})]})]})}}]),a}(n.Component),Je=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state=e.state,r}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.metadata,a=e.server;return Object(b.jsx)("div",{className:"TVBView",children:Object(b.jsxs)("div",{className:"info__container",children:[Object(b.jsx)("div",{className:"info__left",children:Object(b.jsx)("img",{className:"info__poster",src:t.posterPath||"".concat(a,"/api/v1/image/poster?text=").concat(t.title,"&extention=jpeg")})}),Object(b.jsxs)("div",{className:"info__right",children:[Object(b.jsx)(C.a,{variant:"h2",className:"info__title",children:t.title}),Object(b.jsx)(C.a,{variant:"body1",className:"info__overview",style:{marginTop:"30px"},children:t.overview}),Object(b.jsx)("div",{className:"vote__container",children:Object(b.jsx)(ze.a,{name:"Rating",value:t.voteAverage,max:10,readOnly:!0})}),Object(b.jsx)("div",{className:"buttons__container",children:Object(b.jsx)("div",{className:"button",children:Object(b.jsx)(Qe,{props:this.state})})})]})]})})}}]),a}(n.Component),Xe=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state=e.state,r}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state,r=a.auth,n=a.metadata,o=a.server,s=a.sources;e=s.length>1?1:0;var c=parseInt(k.a.parse(this.props.props.location.search).q)||0;function l(e,t){return e===t?"pls-playing":""}return Object(b.jsxs)("div",{className:"TVSView",children:[Object(b.jsx)(C.a,{variant:"h2",style:{textAlign:"center",marginTop:"25px"},children:n.name}),Object(b.jsx)(C.a,{variant:"h5",style:{textAlign:"center",marginTop:"15px"},children:n.children[c].name}),Object(b.jsxs)("div",{className:"plyr__component",children:[Object(b.jsx)(Ue.a,{options:{video:{quality:s,defaultQuality:e,pic:"".concat(o,"/api/v1/image/thumbnail?id=").concat(n.children[c].id)},preload:"auto",theme:Pe.palette.primary.main,contextmenu:[{text:"libDrive",link:"https://github.com/libDrive/libDrive"}],lang:"en"}}),Object(b.jsx)("div",{className:"plyr-playlist-wrapper",children:Object(b.jsx)("ul",{className:"plyr-playlist",children:n.children.length?n.children.map((function(e,a){return Object(b.jsx)("li",{className:l(a,c),children:Object(b.jsxs)(i.b,{to:{pathname:t.props.props.location.pathname,search:"?q=".concat(a)},children:[Object(b.jsx)("img",{className:"plyr-miniposter"}),e.name]},E())},a)})):null})})]}),Object(b.jsxs)("div",{style:{textAlign:"center",marginBottom:"5vh"},children:[Object(b.jsx)(Ye,{props:{auth:r,id:n.children[c].id,metadata:n.children[c],server:o}}),Object(b.jsx)(Ge,{props:this.state})]})]})}}]),a}(n.Component);function Ye(e){var t=o.a.useState(null),a=Object(K.a)(t,2),r=a[0],n=a[1],s=function(){n(null)},c=e.props,i=c.auth,l=c.id,u=c.metadata,h=c.server;return Object(b.jsxs)("div",{className:"PlayerMenu",style:{marginTop:"30px"},children:[Object(b.jsx)(M.a,{"aria-controls":"player-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},variant:"contained",color:"primary",children:"External Player"}),Object(b.jsxs)(G.a,{id:"player-menu",anchorEl:r,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(r),onClose:s,children:[Object(b.jsx)("a",{href:"vlc://".concat(h,"/api/v1/redirectdownload/").concat(encodeURI(u.name),"?a=").concat(i,"&id=").concat(l),className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:s,children:"VLC"})}),Object(b.jsx)("a",{href:"potplayer://".concat(h,"/api/v1/redirectdownload/").concat(encodeURI(u.name),"?a=").concat(i,"&id=").concat(l),className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:s,children:"PotPlayer"})}),Object(b.jsx)("a",{href:"nplayer-".concat(h,"/api/v1/redirectdownload/").concat(encodeURI(u.name),"?a=").concat(i,"&id=").concat(l),className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:s,children:"nPlayer"})}),Object(b.jsx)($.a,{}),Object(b.jsx)(H.a,{onClick:function(){navigator.clipboard.writeText("".concat(h,"/api/v1/redirectdownload/").concat(encodeURI(u.name),"?a=").concat(i,"&id=").concat(l)),n(null)},children:"Copy"}),Object(b.jsx)("a",{href:"".concat(h,"/api/v1/redirectdownload/").concat(encodeURI(u.name),"?a=").concat(i,"&id=").concat(l),className:"no_decoration_link",target:"_blank",children:Object(b.jsx)(H.a,{onClick:s,children:"Download"})})]})]})}function Qe(e){var t=o.a.useState(null),a=Object(K.a)(t,2),r=a[0],n=a[1],s=function(){n(null)},c=e.props.metadata;return Object(b.jsxs)("div",{className:"ChildrenMenu",style:{marginTop:"30px"},children:[Object(b.jsx)(M.a,{"aria-controls":"children-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},variant:"contained",color:"primary",children:"Seasons"}),Object(b.jsx)(G.a,{id:"children-menu",anchorEl:r,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(r),onClose:s,children:c.children.length?c.children.map((function(e){if("directory"==e.type)return Object(b.jsx)(i.b,{to:"/view/".concat(e.id),className:"no_decoration_link",children:Object(b.jsx)(H.a,{onClick:s,children:e.name})},E())})):null})]})}function Ge(e){return Object(b.jsx)("div",{className:"PlaylistMenu",style:{marginTop:"30px"},children:Object(b.jsx)(M.a,{onClick:function(){!function(e){for(var t=e.props,a=t.auth,r=t.metadata,n=t.server,o="#EXTM3U\n#EXTENC: UTF-8\n#PLAYLIST: ".concat(r.name,"\n"),s=0;s<r.children.length;s++)o+="#EXTINF:0, ".concat(r.children[s].name,"\n").concat(n,"/api/v1/redirectdownload/").concat(encodeURI(r.children[s].name),"?a=").concat(a,"&id=").concat(r.children[s].id,"\n");var c=document.createElement("a");c.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),c.setAttribute("download","".concat(r.name,".m3u8")),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}(e)},variant:"contained",color:"primary",children:"m3u8 Playlist"})})}a(165);c.a.render(Object(b.jsx)(i.a,{children:Object(b.jsxs)(h.a,{theme:Pe,children:[Object(b.jsx)(u.a,{}),Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{exact:!0,path:"/",render:function(e){return Object(b.jsx)(g,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/browse",render:function(e){return Object(b.jsx)(S,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/browse/:category",render:function(e){return Object(b.jsx)(N,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/login",render:function(e){return Object(b.jsx)(U,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/logout",render:function(e){return Object(b.jsx)(F,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/search/:q",render:function(e){return Object(b.jsx)(fe,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/settings",render:function(e){return Object(b.jsx)(Se,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/settings/login",render:function(e){return Object(b.jsx)(we,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{exact:!0,path:"/view/:id",render:function(e){return Object(b.jsx)(Fe,Object(r.a)({},e),E())}}),Object(b.jsx)(l.b,{path:"",render:function(e){return Object(b.jsx)(me,Object(r.a)({},e),E())}})]})]})}),document.getElementById("root"))},97:function(e){e.exports=JSON.parse('{"a":"1.2.9"}')}},[[166,1,2]]]);
//# sourceMappingURL=main.193a7926.chunk.js.map